% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get-index-sims.R
\name{get_index_sims}
\alias{get_index_sims}
\title{Calculate population index via simulation from joint precision matrix}
\usage{
get_index_sims(
  obj,
  level = 0.95,
  return_sims = FALSE,
  est_function = stats::median,
  agg_function = function(x) sum(exp(x))
)
}
\arguments{
\item{obj}{\code{\link[=predict.sdmTMB]{predict.sdmTMB()}} output with \code{sims > 0}.}

\item{level}{The confidence level.}

\item{return_sims}{Logical. Return simulation draws? The default is a
quantile summary of those draws.}

\item{est_function}{Function to summarize the estimate (the expected value).
\code{mean()} would be an alternative to \code{median()}.}

\item{agg_function}{Function to aggregate samples within each time slice.}
}
\description{
Calculate population index via simulation from joint precision matrix
}
\examples{
pcod_spde <- make_mesh(pcod, c("X", "Y"), cutoff = 30)
m <- sdmTMB(density ~ 0 + as.factor(year) + depth_scaled + depth_scaled2,
  data = pcod, spde = pcod_spde, family = tweedie(link = "log"),
  time = "year"
)
p <- predict(m, newdata = qcs_grid, sims = 100)
x <- get_index_sims(p)
library(ggplot2)
ggplot(x, aes(year, est, ymin = lwr, ymax = upr)) +
  geom_line() +
  geom_ribbon(alpha = 0.4)
x_sims <- get_index_sims(p, return_sims = TRUE)
ggplot(x_sims, aes(as.factor(year), .value)) +
  geom_violin()
}
